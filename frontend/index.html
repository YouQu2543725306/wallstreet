<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WallStreetQuad - Stock Trading Platform</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="modal-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-chart-line"></i>
                <span>WallStreetQuad</span>
            </div>
            <div class="nav-user">
                <div class="user-info">
                    <i class="fas fa-user-circle"></i>
                    <span>Demo User</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- First Layer: Balance + Tracked Stocks -->
        <section class="first-layer">
            <div class="balance-section">
                <div class="section-container new-balance-card">
                    <div class="balance-header-row">
                        <h3>Balance</h3>
                        <span class="balance-unit">USD</span>
                    </div>
                    <div class="balance-amount-big">$1,180,577.24</div>
                    <div class="balance-distribution-bar">
                        <span class="bar-btc" style="width:40%"></span>
                        <span class="bar-eth" style="width:30%"></span>
                        <span class="bar-usdt" style="width:20%"></span>
                        <span class="bar-other" style="width:10%"></span>
                    </div>
                    <div class="balance-distribution-labels">
                        <span class="btc-label">● BTC</span>
                        <span class="eth-label">● ETH</span>
                        <span class="usdt-label">● USDT</span>
                        <span class="other-label">● Other</span>
                    </div>
                    <div class="balance-profit-row">
                        <span class="profit-today-label">Profit today</span>
                        <span class="profit-amount positive">+$4,245.45</span>
                        <span class="profit-percent positive">+14.5%</span>
                    </div>
                </div>
            </div>
            
            <div class="tracked-stocks-section">
                <div class="section-container">
                    <div class="section-header">
                        <h2>Tracked Stocks</h2>
                        <button class="change-stock-btn" onclick="openChangeStockModal()">
                            <i class="fas fa-exchange-alt"></i>
                            Change Stock
                        </button>
                    </div>
                    <div class="stocks-grid">
                        <div class="stock-card">
                            <div class="stock-header">
                                <div class="stock-info">
                                    <div class="stock-symbol">AAPL</div>
                                    <div class="stock-name">Apple Inc.</div>
                                </div>
                                <div class="stock-price">
                                    <div class="current-price">$175.43</div>
                                    <div class="price-change positive">+$2.15 (+1.24%)</div>
                                </div>
                            </div>
                            <div class="stock-chart">
                                <div class="mini-chart">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stock-card">
                            <div class="stock-header">
                                <div class="stock-info">
                                    <div class="stock-symbol">TSLA</div>
                                    <div class="stock-name">Tesla Inc.</div>
                                </div>
                                <div class="stock-price">
                                    <div class="current-price">$195.20</div>
                                    <div class="price-change positive">+$3.45 (+1.80%)</div>
                                </div>
                            </div>
                            <div class="stock-chart">
                                <div class="mini-chart">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stock-card">
                            <div class="stock-header">
                                <div class="stock-info">
                                    <div class="stock-symbol">MSFT</div>
                                    <div class="stock-name">Microsoft Corp.</div>
                                </div>
                                <div class="stock-price">
                                    <div class="current-price">$315.60</div>
                                    <div class="price-change negative">-$2.30 (-0.72%)</div>
                                </div>
                            </div>
                            <div class="stock-chart">
                                <div class="mini-chart">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Second Layer: My Wallet + My Card -->
        <section class="second-layer">
            <div class="wallet-section">
                <div class="section-container">
                    <div class="section-header">
                        <h2>My Wallet</h2>
                    </div>
                    <div class="wallet-chart-container">
                        <div class="chart-header">
                            <div class="chart-title">My Balance</div>
                            <div class="chart-value">$1,176,356.46</div>
                            <div class="chart-change positive">+3.21%</div>
                        </div>
                        <div class="chart-area">
                            <div class="line-chart-placeholder">
                                <div class="chart-line"></div>
                                <div class="chart-point"></div>
                                <div class="chart-tooltip">
                                    <div class="tooltip-title">My Balance</div>
                                    <div class="tooltip-value">$1,176,356.46</div>
                                    <div class="tooltip-change positive">+3.21%</div>
                                </div>
                            </div>
                            <div class="chart-labels">
                                <span>Jan</span>
                                <span>Feb</span>
                                <span>Mar</span>
                                <span>Apr</span>
                                <span>May</span>
                                <span>Jun</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-section">
                <div class="section-container">
                    <div class="section-header">
                        <h2>My Card</h2>
                        <button class="add-card-btn" onclick="openAddCardModal()">
                            <i class="fas fa-plus"></i> Add Card
                        </button>
                        <!-- <button class="calculator-btn" onclick="openCalculatorModal()">
                            <i class="fas fa-calculator"></i>
                            Calculator
                        </button> -->
                    </div>
                    <!-- Add Card Modal -->
                    <div id="add-card-modal" class="modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>Add New Card</h3>
                                <button class="close-btn" onclick="closeAddCardModal()"><i class="fas fa-times"></i></button>
                            </div>
                            <div class="modal-body">
                                <form id="add-card-form">
                                    <div class="form-group">
                                        <label for="card-number">Card Number</label>
                                        <input type="text" id="card-number" name="card_number" required pattern="\d{12}" maxlength="12" minlength="12" placeholder="Enter 12-digit card number">
                                        <small class="input-hint">Card number must be exactly 12 digits.</small>
                                    </div>
                                    <div class="form-group">
                                        <label for="bank-name">Bank Name</label>
                                        <input type="text" id="bank-name" name="bank_name" required placeholder="Enter bank name">
                                    </div>
                                    <div class="form-group">
                                        <label for="card-balance">Balance</label>
                                        <input type="number" id="card-balance" name="balance" required min="0" placeholder="Enter balance">
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-secondary" onclick="closeAddCardModal()">Cancel</button>
                                <button class="btn btn-primary" onclick="submitNewCard()">Add Card</button>
                            </div>
                        </div>
                    </div>
                    <div class="cards-container"></div>
                </div>
            </div>
        </section>

        <!-- Third Layer: Transaction History -->
        <section class="history-section">
            <div class="section-container">
                <div class="section-header">
                    <h2>Transaction History</h2>
                    <button class="full-records-btn" onclick="viewFullRecords()">
                        <i class="fas fa-list"></i>
                        Full Records
                    </button>
                </div>
                <div class="transaction-list scrollable"></div>
            </div>
        </section>

        <!-- Fourth Layer: Holdings -->
        <section class="holdings-section">
            <div class="section-container">
                <div class="section-header">
                    <h2>My Holdings</h2>
                    <div class="header-buttons">
                        <button class="add-holding-btn" onclick="openAddHoldingModal()">
                            <i class="fas fa-plus"></i>
                            Add
                        </button>
                        <button class="full-records-btn" onclick="viewFullRecords()">
                            <i class="fas fa-list"></i>
                            Full Records
                        </button>
                    </div>
                </div>
                
                <div class="holdings-table scrollable">
                    <table>
                        <thead>
                            <tr>
                                <th>Stock</th>
                                <th>Symbol</th>
                                <th>Quantity</th>
                                <th>Avg Cost</th>
                                <th>Current Price</th>
                                <th>Market Value</th>
                                <th>P&L</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Rows will be dynamically inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 WallStreetQuad. This is a demo project.</p>
        </div>
    </footer>

    <!-- Modal Components -->
    <div id="modal-overlay" class="modal-overlay"></div>
    
    <!-- Include Modal Components -->
    <div id="modal-container">
        <!-- Calculator Modal -->
        <div id="calculator-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Calculator</h3>
                    <button class="close-btn" onclick="closeCalculatorModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Input name:</label>
                        <input type="text" id="stock-name" placeholder="Enter stock name">
                    </div>
                    <div class="form-group">
                        <label>Market price:</label>
                        <input type="number" id="market-price" placeholder="Enter current price" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>Buy Quantity:</label>
                        <input type="number" id="buy-quantity" placeholder="Enter quantity" min="1">
                    </div>
                    <div class="form-group">
                        <label>Duration:</label>
                        <select id="duration">
                            <option value="1">1 Month</option>
                            <option value="3">3 Months</option>
                            <option value="6">6 Months</option>
                            <option value="12">1 Year</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Approximate revenue:</label>
                        <div class="result-display" id="revenue-result">$0.00</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeCalculatorModal()">Cancel</button>
                    <button class="btn btn-primary" onclick="calculateRevenue()">Calculate</button>
                </div>
            </div>
        </div>

        <!-- Change Stock Modal -->
        <div id="change-stock-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Change Tracked Stock</h3>
                    <button class="close-btn" onclick="closeChangeStockModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="current-stocks">
                        <h4>Current Tracked Stocks</h4>
                        <div class="stock-list">
                            <div class="stock-item">
                                <span>AAPL - Apple Inc.</span>
                                <button class="remove-btn" onclick="removeStock('AAPL')">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="stock-item">
                                <span>TSLA - Tesla Inc.</span>
                                <button class="remove-btn" onclick="removeStock('TSLA')">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="stock-item">
                                <span>MSFT - Microsoft Corp.</span>
                                <button class="remove-btn" onclick="removeStock('MSFT')">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="add-stock-section">
                        <h4>Add New Stock</h4>
                        <div class="form-group">
                            <label>Stock Symbol:</label>
                            <input type="text" id="new-stock-symbol" placeholder="e.g., GOOGL">
                        </div>
                        <div class="form-group">
                            <label>Stock Name:</label>
                            <input type="text" id="new-stock-name" placeholder="e.g., Alphabet Inc.">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeChangeStockModal()">Cancel</button>
                    <button class="btn btn-primary" onclick="addNewStock()">Add Stock</button>
                </div>
            </div>
        </div>

        <!-- Add Holding Modal -->
        <div id="add-holding-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Add New Holding</h3>
                    <button class="close-btn" onclick="closeAddHoldingModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Stock Ticker:</label>
                        <input type="text" id="holding-symbol" placeholder="e.g., AAPL">
                    </div>
                    <div class="form-group">
                        <label>Quantity:</label>
                        <input type="number" id="holding-quantity" placeholder="Enter quantity" min="1" oninput="updateHoldingDetails()">
                    </div>
                    <div class="form-group">
                        <label>Unit Price:</label>
                        <div id="holding-unit-price" class="readonly-field">$0.00</div>
                    </div>
                    <div class="form-group">
                        <label>Total Price:</label>
                        <div id="holding-total-price" class="readonly-field">$0.00</div>
                    </div>
                    <div class="form-group">
                        <label>Estimated Gain:</label>
                        <div id="holding-estimated-gain" class="readonly-field">$0.00</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeAddHoldingModal()">Cancel</button>
                    <button class="btn btn-primary" onclick="addNewHolding()">Add Holding</button>
                </div>
            </div>
        </div>

        <!-- Trade Holding Modal -->
        <div id="trade-holding-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Trade Holding</h3>
                    <button class="close-btn" onclick="closeTradeHoldingModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Stock Ticker:</label>
                        <div id="trade-stock-ticker" class="readonly-field">AAPL</div>
                    </div>
                    <div class="form-group">
                        <label>Quantity:</label>
                        <div id="trade-stock-quantity" class="readonly-field">100</div>
                    </div>
                    <div class="form-group">
                        <label>Value:</label>
                        <div id="trade-stock-value" class="readonly-field">$17,543.00</div>
                    </div>
                    <div class="form-group">
                        <label>Trade Quantity:</label>
                        <input type="number" id="trade-quantity" placeholder="Enter quantity to trade" min="1">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeTradeHoldingModal()">Cancel</button>
                    <button class="btn btn-primary" onclick="confirmTrade()">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="scripts.js"></script>
    <script type="module" src="card.js"></script>
</body>
</html>